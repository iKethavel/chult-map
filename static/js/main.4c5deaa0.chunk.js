(this["webpackJsonpchult-map"]=this["webpackJsonpchult-map"]||[]).push([[0],{228:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(26),o=n.n(c),l=n(19),i=n(67),u=n(18),s=(n(73),n(74),n(232)),m=n(230),p=n(231),f=n(233),d=n(7),b=n.n(d),h=n(62),v=n.n(h),k=n(28),E=n.n(k),g=[[0,0],[Math.round(1199.2),Math.round(885.6)]];var j=r.a.memo((function(e){var t=e.onMapClick,n=e.markers,a=e.newMarkerPosition;return r.a.createElement(s.a,{id:"map",crs:b.a.CRS.Simple,maxZoom:24,zoom:0,center:[500,700],style:{height:"100vh",width:"50vw"},onClick:t},r.a.createElement(m.a,{url:v.a,bounds:g}),n.map((function(e){return r.a.createElement(p.a,{key:e.id,position:e.position},r.a.createElement(f.a,null,r.a.createElement(E.a,{source:e.description})))})),a&&r.a.createElement(p.a,{position:a}))})),O=n(64),C=n.n(O),S=n(65),w=n.n(S),y=new C.a;var x=r.a.memo((function(e){var t=e.onSubmit,n=e.onClear,c=Object(a.useState)(""),o=Object(u.a)(c,2),l=o[0],i=o[1],s=Object(a.useCallback)((function(e){var t=e.text;i(t)}),[]);return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("button",{onClick:n},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("h2",null,"\u041d\u043e\u0432\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440: ")),r.a.createElement(w.a,{value:"",renderHTML:function(e){return y.render(e)},onChange:s}),r.a.createElement("button",{onClick:function(){return t({newMarkerDescription:l})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u0438 \u041c\u0430\u0440\u043a\u0435\u0440"))}));var M=r.a.memo((function(e){var t=e.markers,n=e.onDelete,a=function(e){return function(){n(e)}};return r.a.createElement("div",null,r.a.createElement("h2",null,"AllMarkers"),t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("button",{onClick:a(e)},"Delete"),r.a.createElement(E.a,{source:e.description}))})))})),D=n(33),A=n(66),I=D.initializeApp({apiKey:"AIzaSyCbBfRISSy3q2qT9qD_p96CvkoCSq2KPDg",authDomain:"chult-map.firebaseapp.com",databaseURL:"https://chult-map.firebaseio.com",projectId:"chult-map",storageBucket:"chult-map.appspot.com",messagingSenderId:"643217035072",appId:"1:643217035072:web:cc1f3717cbc060849ab4a5",measurementId:"G-0JJX22XY3V"}).auth(),R={googleProvider:new D.auth.GoogleAuthProvider},L=Object(A.a)({providers:R,firebaseAppAuth:I}),P=D.firestore();var q=L(r.a.memo((function(e){var t=e.loading,n=e.user,a=e.signOut,c=e.signInWithGoogle;return r.a.createElement("div",null,t&&r.a.createElement("h2",null,"Loading.."),n?r.a.createElement("h1",null,"Hello, ",n.displayName):r.a.createElement("h1",null,"Log in"),n?r.a.createElement("button",{onClick:a},"Sign out"):r.a.createElement("button",{onClick:c},"Sign in with Google"))}))),G=n(16),J=n.n(G),K=n(34),z=function(){var e=Object(K.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("markers").add(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(K.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("markers").doc(t).delete();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(K.a)(J.a.mark((function e(){var t,n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("markers").get();case 3:return t=e.sent,n=[],t.forEach((function(e){var t=e.data();n.push(Object(l.a)({fid:e.id},t))})),console.log("MARKERS: ",n),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),T=[{title:"Markers",tab:"markers"},{title:"Sign in",tab:"sign_in"}];var X=L((function(e){var t=e.loading,n=e.user,c=Object(a.useState)(T[0].tab),o=Object(u.a)(c,2),s=o[0],m=o[1],p=Object(a.useState)([]),f=Object(u.a)(p,2),d=f[0],b=f[1],h=Object(a.useState)(null),v=Object(u.a)(h,2),k=v[0],E=v[1];Object(a.useEffect)((function(){var e=P.collection("markers").onSnapshot((function(e){var t=function(e){try{var t=[];return e.forEach((function(e){var n=e.data();t.push(Object(l.a)({fid:e.id},n))})),console.log("MARKERS: ",t),t}catch(n){console.error(n),alert(n)}}(e);b(t)}),(function(e){console.error(e)}));return function(){return e()}}),[]),n||s===T[1].tab||m(T[1].tab);var g=Object(a.useCallback)((function(e){E(e.latlng)}),[]),O=Object(a.useCallback)((function(){E(null)}),[]),C=Object(a.useCallback)((function(e){var t=e.newMarkerDescription,n={id:Date.now(),description:t,position:k};b([].concat(Object(i.a)(d),[n])),E(null);var a=Object(l.a)({},n,{position:[k.lat,k.lng]});z(a).then(H).then(b)}),[d,k]),S=Object(a.useCallback)((function(e){B(e.fid).then(H).then(b)}),[]);return t?r.a.createElement("h2",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(j,{onMapClick:g,markers:d,newMarkerPosition:k}),r.a.createElement("div",{id:"panel"},r.a.createElement("div",{style:{display:"flex"}},T.map((function(e){return r.a.createElement("button",{key:e.tab,onClick:function(){m(e.tab),E(null)}},e.title)}))),n&&k&&r.a.createElement(x,{onSubmit:C,onClear:O}),!k&&s===T[0].tab&&r.a.createElement(M,{markers:d,onDelete:S}),!k&&s===T[1].tab&&r.a.createElement(q,null)))}));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))},62:function(e,t,n){e.exports=n.p+"static/media/map.42dc2325.jpg"},68:function(e,t,n){e.exports=n(228)},73:function(e,t,n){}},[[68,1,2]]]);
//# sourceMappingURL=main.4c5deaa0.chunk.js.map